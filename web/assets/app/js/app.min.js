String.prototype.escapeHTML=function(){return(this.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"))};var cols={},messageIsOpen=false;$(function(){startTime(1);$("input").attr("autocomplete","off");initPerfectScrollbar("#perfectScroll");initModal();initTooltips(".tt");$(window).hashchange();initMenu("#"+GetNav);initOverlays();detectHash()});function initMenu(a){var b=$(a);if(!b.is(":visible")){b.parent().prev("a").trigger("click")}b.addClass("active")}function initOverlays(){cols.showOverlay=function(){$("body").addClass("show-main-overlay")};cols.hideOverlay=function(){$("body").removeClass("show-main-overlay")};cols.showMessage=function(){$("body").addClass("show-message");messageIsOpen=true};cols.hideMessage=function(){$("body").removeClass("show-message");messageIsOpen=false};cols.showSidebar=function(){$("body").addClass("show-sidebar")};cols.hideSidebar=function(){$("body").removeClass("show-sidebar")};$(".trigger-toggle-sidebar").on("click",function(){cols.showSidebar();cols.showOverlay()});$(".trigger-message-close").on("click",function(){var a=$(this).closest(".messageFly");if($(".messageFly").length<=1){cols.hideMessage();a.remove();history.pushState("",document.title,window.location.pathname)}else{a.animate({left:"9999px"},function(){a.remove()})}});$("#main > .overlay").on("click",function(){cols.hideOverlay();cols.hideMessage();cols.hideSidebar()})}function detectHash(){var a=window.location.hash;if(!a.length){return false}$("[data-hash="+a.replace("#","")+"]").trigger("click")}$(document).on("click",".toggleTree",function(b){b.preventDefault();var c=$(this).next(".treeMenu");var a=$(this).children("i");if(c.is(":visible")){a.removeClass("fa-chevron-down").addClass("fa-chevron-right")}else{a.removeClass("fa-chevron-right").addClass("fa-chevron-down")}c.toggle(200)});$(document).on("click",".clickable",function(c){c.preventDefault();window.location.hash=$(this).attr("data-hash");var b=Math.floor((Math.random()*10000)+1);$("body").append('<div class="messageFly" id="'+b+'"></div>');var a=$("#"+b);a.show();loadDetails($(this),b);if(messageIsOpen){if(!$(this).hasClass("innerMessage")){cols.hideMessage()}setTimeout(function(){cols.showMessage()},300)}else{cols.showMessage()}cols.showOverlay()});$(document).on("click",".initUploader",function(a){a.preventDefault();initUploader($(this).attr("data-uploader"));$(this).remove()});function loadDetails(b,c){var a=$("#"+c);a.html('<i class="fa fa-spin fa-spinner fa-4x"></i>');$.get(b.attr("data-url")).done(function(e){a.html(e);var d=window.location.hash.split("load-");if(d.length){$('[data-device="'+d[1]+'"]').trigger("click")}$("#menuToggle > input").trigger("click");initOverlays();initModal();initTooltips(".tt");initPerfectScrollbar(".subScroll")})}$(document).on("click",".md-close",function(b){b.preventDefault();var a=$("#modal");if($(this).hasClass("disabled")){return false}a.removeClass("md-show")});$(document).on("click",".md-trigger",function(f){f.preventDefault();var j=$(this);var i=j.attr("data-title");var b=j.attr("data-html");var h=j.attr("data-ok");var c=j.attr("data-to-revise");var g=j.attr("data-row");var k=j.attr("data-id");var d=j.attr("data-ok-url");var a=j.attr("data-parent-html");modalUpdate(i,b,h,k,d,a);if(j.attr("data-pre-url").length){$.get(j.attr("data-pre-url")).done(function(e){f.preventDefault();if(e.result==="success"){if(e.extra){b=e.extra.html;i=e.extra.title;modalUpdate(i,b,h,k,d,a,c,g)}else{openNoty(e.result,e.message)}}}).fail(function(){openNoty("error","Ajax Error")})}});function modalUpdate(j,e,c,b,f,h,k,l){var a=$("#modalTitle");var i=$("#modalText");var g=$("#mOkClass");var d=$("#mAbortClass");a.html(j);i.html(e);g.removeClass().addClass("btn").addClass("btn-success").addClass("rounded-0").addClass("btn-block").addClass(c).attr("data-id",b).attr("data-ok-url",f).attr("data-parent-html",h).attr("data-to-revise",k).attr("data-row",l);d.removeClass().addClass("btn").addClass("btn-danger").addClass("md-close").addClass("rounded-0").addClass("btn-block")}function initModal(){[].slice.call($(".md-trigger")).forEach(function(c,b){var a=$("#"+c.getAttribute("data-modal"));c.addEventListener("click",function(d){a.addClass("md-show")})})}function initPerfectScrollbar(a){var b=$(a);if(b.length){new PerfectScrollbar(a);new PerfectScrollbar("#pScrollerMenu")}}function initTimePicker(b){var a=$(b);if(a.length){a.timepicker({timeFormat:"HH:mm",interval:15,dynamic:false,dropdown:false,scrollbar:true})}}function initPickaDay(a){var b=$(a);if(b.length){new Pikaday({field:b[0],format:"DD.MM.YY"})}}function openNoty(a,b){new Noty({layout:"topRight",text:b,type:a,timeout:3000,buttons:false}).show()}function initTooltips(a){var b=$(a);b.tooltipster({theme:"tooltipster-punk",contentAsHTML:true})}function startTime(i){var a=$("#ajax-route-update-times").val();var c=$("#ajax-route-nmaster-api").val();var e=new Date();var d=e.getHours();var b=e.getMinutes();var j=e.getSeconds();var f=$("#nm-errors");b=checkTime(b);j=checkTime(j);$("#startClock").html("@"+d+":"+b+":"+j+" Uhr");var g=setTimeout(startTime,1000)}function checkTime(a){if(a<10){a="0"+a}return a}function closeModal(){$(".trigger-message-close").trigger("click")}$(window).hashchange(function(){var a=location.hash.replace(/^#/,"");if(a===""){$(".trigger-message-close").trigger("click")}});